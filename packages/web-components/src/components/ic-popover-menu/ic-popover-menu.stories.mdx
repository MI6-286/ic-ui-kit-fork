import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { html } from "lit-html";
import readme from "./readme.md";
import menuItemReadme from "../ic-menu-item/readme.md";
import menuGroupReadme from "../ic-menu-group/readme.md";

<Meta title="Web Components/Popover menu" component="Popover Menu" />

<Description markdown={readme} />
<Description markdown={menuItemReadme} />
<Description markdown={menuGroupReadme} />

### Default

<Canvas>
  <Story name="Default">
    {(args) =>
      html`
        <ic-button id="button-1" onclick="buttonClick()"
          >Show/Hide popover</ic-button
        >
        <script>
          var icPopover = document.querySelector("ic-popover-menu");
          function buttonClick() {
            icPopover.open = !icPopover.open;
          }
          icPopover.addEventListener("icPopoverClosed", handleClosed);
          function handleClosed(event) {
            console.log(event.detail);
          }
        </script>
        <div>
          <ic-popover-menu anchor="button-1" aria-label="popover">
            <ic-menu-item label="Copy code" keyboard-shortcut-label="Cmd+"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                slot="icon"
              >
                <path
                  d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"
                /></svg
            ></ic-menu-item>
            <ic-menu-item
              label="Copy code"
              variant="toggle"
              keyboard-shortcut-label="Cmd+"
              description="another test description to make sure things work as expected"
            ></ic-menu-item>
            <ic-menu-item
              label="Show/hide"
              variant="toggle"
              keyboard-shortcut-label="Cmd+"
              description="hi this is a description to test with"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                slot="icon"
              >
                <path
                  d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-group label="View">
              <ic-menu-item
                label="Zoom in"
                keyboard-shortcut-label="Cmd+"
              ></ic-menu-item>
              <ic-menu-item
                label="Zoom out"
                keyboard-shortcut-label="Cmd-"
              ></ic-menu-item>
            </ic-menu-group>
            <ic-menu-item
              label="Actions"
              submenu-trigger-for="abc"
            ></ic-menu-item>
            <ic-menu-item
              label="Logout"
              variant="destructive"
              keyboard-shortcut-label="Cmd+"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                slot="icon"
              >
                <path
                  d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"
                /></svg
            ></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc">
            <ic-menu-item label="Edit"></ic-menu-item>
            <ic-menu-item
              label="Find"
              submenu-trigger-for="abc123"
            ></ic-menu-item>
            <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc123">
            <ic-menu-item
              disabled="true"
              label="Search the web"
              description="This will search the web to find the thing you are looking for."
            ></ic-menu-item>
            <ic-menu-item label="Find..."></ic-menu-item>
            <ic-menu-item label="Find icons">
              <svg
                slot="icon"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 0 24 24"
                width="24px"
              >
                <path d="M0 0h24v24H0V0z" fill="none" />
                <path
                  d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-item
              label="Show found results"
              variant="toggle"
            ></ic-menu-item>
          </ic-popover-menu>
        </div>
      `
    }
  </Story>
</Canvas>

### Max height

<Canvas>
  <Story name="Max height">
    {(args) =>
      html`
        <style>
          ic-popover-menu {
            --max-height: 100px;
          }
        </style>
        <ic-button id="button-1" onclick="buttonClick()"
          >Show/Hide popover</ic-button
        >
        <script>
          var icPopover = document.querySelector("ic-popover-menu");
          function buttonClick() {
            icPopover.open = !icPopover.open;
          }
        </script>
        <div>
          <ic-popover-menu anchor="button-1" aria-label="popover">
            <ic-menu-item label="Copy code" disabled="true"></ic-menu-item>
            <ic-menu-group label="View">
              <ic-menu-item
                label="Zoom in"
                keyboard-shortcut-label="Cmd+"
              ></ic-menu-item>
              <ic-menu-item
                label="Zoom out"
                keyboard-shortcut-label="Cmd-"
              ></ic-menu-item>
            </ic-menu-group>
            <ic-menu-item
              label="Actions"
              submenu-trigger-for="abc"
            ></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc">
            <ic-menu-item label="Edit"></ic-menu-item>
            <ic-menu-item
              label="Find"
              submenu-trigger-for="abc123"
            ></ic-menu-item>
            <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc123">
            <ic-menu-item
              label="Search the web"
              description="This will search the web to find the thing you are looking for."
            ></ic-menu-item>
            <ic-menu-item label="Find..."></ic-menu-item>
            <ic-menu-item label="Find icons">
              <svg
                slot="icon"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 0 24 24"
                width="24px"
              >
                <path d="M0 0h24v24H0V0z" fill="none" />
                <path
                  d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-item
              label="Show found results"
              variant="toggle"
            ></ic-menu-item>
          </ic-popover-menu>
        </div>
      `
    }
  </Story>
</Canvas>

### Left placement

<Canvas>
  <Story name="Left placement">
    {(args) =>
      html`
        <div style="margin-left: 1000px">
          <ic-button id="button-1" onclick="buttonClick()"
            >Show/Hide popover</ic-button
          >
          <script>
            var icPopover = document.querySelector("ic-popover-menu");
            function buttonClick() {
              icPopover.open = !icPopover.open;
            }
          </script>
          <div>
            <ic-popover-menu anchor="button-1" aria-label="popover">
              <ic-menu-item label="Copy code" disabled="true"></ic-menu-item>
              <ic-menu-group label="View">
                <ic-menu-item
                  label="Zoom in"
                  keyboard-shortcut-label="Cmd+"
                ></ic-menu-item>
                <ic-menu-item
                  label="Zoom out"
                  keyboard-shortcut-label="Cmd-"
                ></ic-menu-item>
              </ic-menu-group>
              <ic-menu-item
                label="Actions"
                submenu-trigger-for="abc"
              ></ic-menu-item>
            </ic-popover-menu>
            <ic-popover-menu submenu-id="abc">
              <ic-menu-item label="Edit"></ic-menu-item>
              <ic-menu-item
                label="Find"
                submenu-trigger-for="abc123"
              ></ic-menu-item>
              <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
            </ic-popover-menu>
            <ic-popover-menu submenu-id="abc123">
              <ic-menu-item
                label="Search the web"
                description="This will search the web to find the thing you are looking for."
              ></ic-menu-item>
              <ic-menu-item label="Find..."></ic-menu-item>
              <ic-menu-item label="Find icons">
                <svg
                  slot="icon"
                  xmlns="http://www.w3.org/2000/svg"
                  height="24px"
                  viewBox="0 0 24 24"
                  width="24px"
                >
                  <path d="M0 0h24v24H0V0z" fill="none" />
                  <path
                    d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                  />
                </svg>
              </ic-menu-item>
              <ic-menu-item
                label="Show found results"
                variant="toggle"
              ></ic-menu-item>
            </ic-popover-menu>
          </div>
        </div>
      `
    }
  </Story>
</Canvas>

### Top placement

<Canvas>
  <Story name="Top placement">
    {(args) =>
      html`
        <div style="margin-top: 540px">
          <ic-button id="button-1" onclick="buttonClick()"
            >Show/Hide popover</ic-button
          >
          <script>
            var icPopover = document.querySelector("ic-popover-menu");
            function buttonClick() {
              icPopover.open = !icPopover.open;
            }
          </script>
          <div>
            <ic-popover-menu anchor="button-1" aria-label="popover">
              <ic-menu-item label="Copy code" disabled="true"></ic-menu-item>
              <ic-menu-group label="View">
                <ic-menu-item
                  label="Zoom in"
                  keyboard-shortcut-label="Cmd+"
                ></ic-menu-item>
                <ic-menu-item
                  label="Zoom out"
                  keyboard-shortcut-label="Cmd-"
                ></ic-menu-item>
              </ic-menu-group>
              <ic-menu-item
                label="Actions"
                submenu-trigger-for="abc"
              ></ic-menu-item>
            </ic-popover-menu>
            <ic-popover-menu submenu-id="abc">
              <ic-menu-item label="Edit"></ic-menu-item>
              <ic-menu-item
                label="Find"
                submenu-trigger-for="abc123"
              ></ic-menu-item>
              <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
            </ic-popover-menu>
            <ic-popover-menu submenu-id="abc123">
              <ic-menu-item
                label="Search the web"
                description="This will search the web to find the thing you are looking for."
              ></ic-menu-item>
              <ic-menu-item label="Find..."></ic-menu-item>
              <ic-menu-item label="Find icons">
                <svg
                  slot="icon"
                  xmlns="http://www.w3.org/2000/svg"
                  height="24px"
                  viewBox="0 0 24 24"
                  width="24px"
                >
                  <path d="M0 0h24v24H0V0z" fill="none" />
                  <path
                    d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                  />
                </svg>
              </ic-menu-item>
              <ic-menu-item
                label="Show found results"
                variant="toggle"
              ></ic-menu-item>
            </ic-popover-menu>
          </div>
        </div>
      `
    }
  </Story>
</Canvas>

### Multiple popovers on page

<Canvas>
  <Story name="Multiple popovers on page">
    {(args) =>
      html` <ic-link href="/">Link1</ic-link>
        <ic-button id="button-1" onclick="buttonClick(1)"
          >Show/Hide popover</ic-button
        >
        <ic-link href="/">Link2</ic-link>
        <ic-button id="button-2" onclick="buttonClick(2)"
          >Show/Hide popover 2</ic-button
        >
        <ic-link href="/">Link3</ic-link>
        <script>
          function buttonClick(pos) {
            var icPopover = document.querySelector("#popover" + pos);
            icPopover.open = !icPopover.open;
          }
        </script>
        <div>
          <ic-popover-menu anchor="button-1" aria-label="popover" id="popover1">
            <ic-menu-item label="Copy code" disabled="true"></ic-menu-item>
            <ic-menu-group label="View">
              <ic-menu-item
                label="Zoom in"
                keyboard-shortcut-label="Cmd+"
              ></ic-menu-item>
              <ic-menu-item
                label="Zoom out"
                keyboard-shortcut-label="Cmd-"
              ></ic-menu-item>
            </ic-menu-group>
            <ic-menu-item
              label="Actions"
              submenu-trigger-for="abc"
            ></ic-menu-item>
            <ic-menu-item
              label="Logout"
              variant="destructive"
              disabled="true"
            ></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc">
            <ic-menu-item label="Edit"></ic-menu-item>
            <ic-menu-item
              label="Find"
              submenu-trigger-for="abc123"
            ></ic-menu-item>
            <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="abc123">
            <ic-menu-item
              disabled="true"
              label="Search the web"
              description="This will search the web to find the thing you are looking for."
            ></ic-menu-item>
            <ic-menu-item label="Find..."></ic-menu-item>
            <ic-menu-item label="Find icons">
              <svg
                slot="icon"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 0 24 24"
                width="24px"
              >
                <path d="M0 0h24v24H0V0z" fill="none" />
                <path
                  d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-item
              label="Show found results"
              variant="toggle"
            ></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu anchor="button-2" aria-label="popover" id="popover2">
            <ic-menu-item label="Copy code" disabled="true"></ic-menu-item>
            <ic-menu-group label="View">
              <ic-menu-item
                label="Zoom in"
                keyboard-shortcut-label="Cmd+"
              ></ic-menu-item>
              <ic-menu-item
                label="Zoom out"
                keyboard-shortcut-label="Cmd-"
              ></ic-menu-item>
            </ic-menu-group>
            <ic-menu-item
              label="Actions"
              submenu-trigger-for="def"
            ></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="def">
            <ic-menu-item label="Edit"></ic-menu-item>
            <ic-menu-item
              label="Find"
              submenu-trigger-for="def123"
            ></ic-menu-item>
            <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
          </ic-popover-menu>
          <ic-popover-menu submenu-id="def123">
            <ic-menu-item
              label="Search the web"
              description="This will search the web to find the thing you are looking for."
            ></ic-menu-item>
            <ic-menu-item label="Find..."></ic-menu-item>
            <ic-menu-item label="Find icons">
              <svg
                slot="icon"
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 0 24 24"
                width="24px"
              >
                <path d="M0 0h24v24H0V0z" fill="none" />
                <path
                  d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-item
              label="Show found results"
              variant="toggle"
            ></ic-menu-item>
          </ic-popover-menu>
        </div>`
    }
  </Story>
</Canvas>

### Playground

export const defaultArgs = {
  open: true,
  groupLabel: "View",
  description: "",
  disabled: false,
  href: "/",
  keyboardShortcutLabel: "Cmd + C",
  label: "Copy code",
  variant: "default",
  iconSlot: true,
  theme: "inherit",
};

<Canvas>
  <Story
    args={defaultArgs}
    argTypes={{
      variant: {
        options: ["default", "toggle", "destructive"],
        control: {
          type: "radio",
        },
      },
      iconSlot: {
        mapping: {
          true: "icon",
          false: "",
        },
      },
      theme: {
        options: ["inherit", "light", "dark"],
        control: {
          type: "inline-radio",
        },
      },
    }}
    name="Playground"
  >
    {(args) =>
      html`<div>
        <ic-popover-menu
          aria-label="popover"
          open=${args.open}
          theme=${args.theme}
          id="popover-menu-playground"
        >
          <ic-menu-group label=${args.groupLabel}>
            <ic-menu-item
              description=${args.description}
              disabled=${args.disabled}
              href=${args.href}
              keyboard-shortcut-label=${args.keyboardShortcutLabel}
              label=${args.label}
              variant=${args.variant}
            >
              <svg
                slot=${args.iconSlot}
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 0 24 24"
                width="24px"
              >
                <path d="M0 0h24v24H0V0z" fill="none" />
                <path
                  d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                />
              </svg>
            </ic-menu-item>
            <ic-menu-item
              label="Zoom out"
              keyboard-shortcut-label="Cmd-"
            ></ic-menu-item>
          </ic-menu-group>
          <ic-menu-item
            label="Actions"
            submenu-trigger-for="abc"
          ></ic-menu-item>
        </ic-popover-menu>
        <ic-popover-menu submenu-id="abc" theme=${args.theme}>
          <ic-menu-item label="Edit"></ic-menu-item>
          <ic-menu-item label="Find"></ic-menu-item>
          <ic-menu-item label="Delete" variant="destructive"></ic-menu-item>
        </ic-popover-menu>
      </div>`
    }
  </Story>
</Canvas>
